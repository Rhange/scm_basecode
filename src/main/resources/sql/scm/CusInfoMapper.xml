<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.happyjob.study.scm.dao.CusInfoDao">

    <select id="cusList" resultType="kr.happyjob.study.scm.model.CusInfoModel">
        SELECT INFO.name AS company_nm
                , TSU.company_mng AS company_mng_nm
                , INFO.tel AS mng_tel
                , TSU.active AS active
            FROM tb_scm_userinfo AS TSU
            
            LEFT JOIN (
                    SELECT name
                            , tel
                            , loginID
                        FROM tb_userinfo ) AS INFO
            ON TSU.loginID = INFO.loginID
            ORDER BY TSU.active DESC
    </select>
    
    <select id="cusListCnt" resultType="int">
        SELECT COUNT(*) AS cusListCnt
            FROM tb_scm_userinfo AS TSU
            
            LEFT JOIN (
                    SELECT name
                            , tel
                            , loginID
                        FROM tb_userinfo ) AS INFO
            ON TSU.loginID = INFO.loginID
    </select>
</mapper>