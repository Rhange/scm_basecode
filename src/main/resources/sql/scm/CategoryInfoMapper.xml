<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.happyjob.study.scm.dao.CategoryInfoDao">
  <!-- 품목 목록 조회 -->
  <select id="listLargeCategory" resultType = "kr.happyjob.study.scm.model.CategoryInfoModel">
  SELECT l_ct_cd,
         l_ct_nm
    FROM tb_scm_l_category
   LIMIT #{pageIndex}, #{pageSize}
  </select>
  <!-- 품목 카운트 -->
  <select id="totalCntLargeCategory"  resultType="int">
    SELECT COUNT(1) AS tot_cnt 
      FROM tb_scm_l_category
  </select>
  
  <!-- 상호 목록 조회 -->
  <select id="listMiddleCategory" resultType = "kr.happyjob.study.scm.model.CategoryInfoModel">
   SELECT MC.m_ct_cd,
          MC.m_ct_nm
     FROM tb_scm_m_category MC
LEFT JOIN tb_scm_l_category LC ON MC.l_ct_cd = LC.l_ct_cd
    WHERE MC.l_ct_cd = #{l_ct_cd}
    LIMIT #{pageIndex}, #{pageSize}
  </select>
  <!-- 상호 카운트 -->
  <select id="totalCntMiddleCategory"  resultType="int">
   SELECT COUNT(1) AS tot_cnt 
     FROM tb_scm_m_category MC
LEFT JOIN tb_scm_l_category LC ON MC.l_ct_cd = LC.l_ct_cd
    WHERE MC.l_ct_cd = #{l_ct_cd}
  </select>
  
  <!-- 품목 단건 조회 -->
   <select id="selectLargeCategory" resultType="kr.happyjob.study.scm.model.CategoryInfoModel" >
     SELECT  l_ct_cd as l_ct_cd
           , l_ct_nm as l_ct_nm
      FROM tb_scm_l_category
     WHERE l_ct_cd = #{l_ct_cd}
   </select>
   
   <!-- 상호 단건 조회 -->
   <select id="selectMiddleCategory" resultType="kr.happyjob.study.scm.model.CategoryInfoModel" >
     SELECT  LC.l_ct_cd as l_ct_cd
           , LC.l_ct_nm as l_ct_nm
           , MC.m_ct_cd as m_ct_cd
           , MC.m_ct_nm as m_ct_nm
      FROM tb_scm_m_category MC
 LEFT JOIN tb_scm_l_category LC ON LC.l_ct_cd = MC.l_ct_cd     
     WHERE MC.m_ct_cd = #{m_ct_cd}
   </select>
  
</mapper>