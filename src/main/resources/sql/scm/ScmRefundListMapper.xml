<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.happyjob.study.scm.dao.ScmRefundListDao">
		<!-- 반품신청 목록 조회 -->
		<select id="selectRefundList" resultType="kr.happyjob.study.scm.model.ScmRefundListModel"> 
			SELECT o.order_cd orderCode,
			       ui.name customerName,
			       prod.prod_nm productName,
			       mct.m_ct_nm middleCategory,
			       o.refund_date refundDate,
			       o.refund_cnt refundCount,
			       o.refund_amt refundAmount,
			       o.STTcd STTcd
			FROM tb_order o
			LEFT JOIN tb_userinfo ui ON ui.loginID = o.loginID
			LEFT JOIN tb_scm_product prod ON prod.product_cd = o.order_cd
			LEFT JOIN tb_scm_m_category mct ON mct.m_ct_cd = prod.m_ct_cd
			WHERE STTcd IN (3, 4, 5, 6, 7)
			ORDER BY o.order_date
		    LIMIT #{pageIndex}, #{pageSize}
		</select>
		
		<!-- 반품신청 목록 데이터 갯수 카운팅 -->
		<select id="selectRefundListCnt" resultType="int">
			SELECT COUNT(*) tot_cnt
			FROM tb_order
			WHERE STTcd IN (3, 4, 5, 6, 7)
		</select>
</mapper>
