<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.happyjob.study.pcs.dao.RefundDao">

  <!-- 반품서 목록 조회(기본)  -->
  <select id="selectRefundList" resultType="kr.happyjob.study.pcs.model.RefundModel">
    
    SELECT DISTINCT li.refund_list_no, li.order_cd,sup.supply_nm, sup.supply_cd, pro.prod_nm, pro.m_ct_cd,ord.refund_cnt, li.submit_date, li.refund_date
      FROM tb_scm_refund_list li, tb_order ord, tb_scm_product pro, tb_scm_supply sup
     WHERE li.order_cd = ord.order_cd AND ord.product_cd = pro.product_cd AND pro.supply_cd = sup.supply_cd
  ORDER BY li.refund_list_no DESC
  
  </select>
  
  <!-- 반품서 목록 총 개수 조회 -->
  <select id="countRefundList" resultType="int">
  
    SELECT count(*)
      FROM tb_scm_refund_list
     WHERE scm_id IS NULL 
     
  </select>

</mapper>